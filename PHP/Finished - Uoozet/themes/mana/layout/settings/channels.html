<div class="pt_shadow user-setting-panel ">
	<?php if(pt_vrequest_exists()):
		$flag = TRUE; ?>
	<div class="prevent_msg">
		<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-mail"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
		{{LANG verif_request_received}}
	</div>
	<?php elseif ($pt->user->verified == 1):
	$flag = TRUE; ?>
	<div class="prevent_msg">
		<a href="{{LINK settings/verification/<?php echo $pt->settings->username; ?>}}" data-load="?link1=settings&page=verification&user=<?php echo $pt->settings->username; ?>">
			{{LANG u_must_be_verified}}
		</a>
	</div>
	<?php endif; ?>
	<div class="channels-list" style="<?= (($flag === TRUE) ? ('filter: blur(5px)') : ('')) ?>">
		{{CHANNEL_LIST}}
		<span class="btn btn-file pt_design_button" onclick="$('#channel-request-form').toggleClass('hidden');">
			<svg class="add-svg" viewBox="0 0 12 12" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
				<title>ic_close_24px</title>
				<desc>Created with Sketch.</desc>
				<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
					<g transform="translate(-654.000000, -40.000000)">
						<g transform="translate(650.000000, 36.000000)">
							<g id="Group">
								<polygon id="Shape" points="0 0 20 0 20 20 0 20"></polygon>
								<polygon id="Shape" fill="currentColor" points="15.8333333 5.34166667 14.6583333 4.16666667 10 8.825 5.34166667 4.16666667 4.16666667 5.34166667 8.825 10 4.16666667 14.6583333 5.34166667 15.8333333 10 11.175 14.6583333 15.8333333 15.8333333 14.6583333 11.175 10"></polygon>
							</g>
						</g>
					</g>
				</g>
			</svg>
		</span>
	</div>
	<form class="form-horizontal channel-request-form pt_forms hidden" style="<?= (($flag === TRUE) ? ('filter: blur(5px)') : ('')) ?>"
		  id="channel-request-form" method="POST">
		<div class="channel-request-alert"></div>
		<div class="form-group">
			<div class="col-md-12">
				<input id="short_name" name="short_name" type="text" placeholder="{{LANG short_name}}" class="form-control input-md">
			</div>
		</div>
		<div class="form-group">
			<div class="col-md-12">
				<input name="name" type="text" class="form-control" placeholder="{{LANG first_name}}...">
			</div>
			<div class="col-md-12">
				<textarea name="description" rows="10" class="form-control" placeholder="{{LANG description}}..."></textarea>
			</div>
		</div>
		<div class="form-group">
			<label for="privacy-options">{{LANG privacy}}</label>
			<div id="privacy-options" class="col-md-12">
				<div class="col-md-6">
					<label for="privacy-0">{{LANG public}}</label>
					<input id="privacy-0" name="privacy" type="radio" class="form-control" value="0" checked>
				</div>
				<div class="col-md-6">
					<label for="privacy-1">{{LANG private}}</label>
					<input id="privacy-1" name="privacy" type="radio" class="form-control" value="1">
				</div>
			</div>
		</div>
		<div class="form-group">
			<label for="cost-options">{{LANG subscription_cost}}</label>
			<div id="cost-options" class="col-md-12 form-group">
				<div class="form-group">
					<div class="col-md-6">
						<label for="free-1">{{LANG cost_free}}</label>
						<input id="free-1" name="free" type="radio" class="form-control" value="1" checked>
					</div>
					<div class="col-md-6">
						<label for="free-0">{{LANG cost_need}}</label>
						<input id="free-0" name="free" type="radio" class="form-control" value="0">
					</div>
				</div>
				<div class="form-group col-md-12">
					<div class="form-group col-md-4">
						<label for="fee_period">{{LANG charge_period}}</label>
						<select id="fee_period" name="fee_period">
							{{CHARGE_PERIOD_OPTIONS}}
						</select>
					</div>
					<div class="form-group col-md-4">
						<label for="cost">{{LANG cost}}</label>
						<input id="cost" name="cost" type="number" min="0">
					</div>
					<div class="form-group col-md-4">
						<label for="currency">{{LANG currency}}</label>
						<select id="currency" name="currency">
							{{CURRENCY_OPTIONS}}
						</select>
					</div>
				</div>
			</div>
		</div>
		<div class="last-sett-btn modal-footer">
			<button id="submit" name="submit" class="btn btn-main setting-panel-mdbtn"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-send"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg> {{LANG submit_request}}</button>
		</div>

		<input type="hidden" name="hash_id" value="<?php echo PT_CreateSession()?>">
		<input type="hidden" name="user_id" value="{{USER id}}">
		<input type="file" name="identity" id="identity" class="hidden" accept="image/*">
		<!-- Button (Double) -->

		<div class="clear"></div>
	</form>
</div>
<script>
	jQuery(document).ready(function($) {
		                                       
		$('#identity').change(function(event) {
			let file_size = $(this).prop('files')[0].size;
		    if (file_size > "{{CONFIG max_upload}}") {
		        swal({
		            title: '{{LANG error}}',
		            text:  "{{LANG file_is_too_big}} <?php echo pt_size_format($pt->config->max_upload); ?>",
		            type: 'error',
		            confirmButtonColor: '#3085d6',
		            cancelButtonColor: '#d33',
		            confirmButtonText: 'OK',
		            buttonsStyling: true,
		            confirmButtonClass: 'btn btn-success',
		        }).then(function(){
		            swal.close();
		            $(this).val('');
		         },
		         function() {
		            swal.close();
		            $(this).val('');
		         });
		         return false;
		    }
		    else{
		    	$("#image-renderer").html("<img src='" + window.URL.createObjectURL(this.files[0]) + "' alt='Picture'>");
		    }	
		});

		$('#verifiacation-request-form').ajaxForm({
		    url: '{{LINK aj/channels/request}}?hash=' + $('.main_session').val(),
	        dataType:'json',
		    beforeSend: function() {
		    	/* pass */
		    },
		    success: function(data) {   
		    	scrollToTop();  
	            if (data.status == 200) {
	            	$('.verifiacation-request-alert').html('<div class="alert alert-success bg-success"><i class="fa fa-check"></i> '+data.message+'</div>');
	            	$('#verifiacation-request-form').resetForm();

	            	PT_Delay(function(){
	            		window.location.href = "{{LINK home}}";
	            	},1500);
	            }
	            else{
	               $('.verifiacation-request-alert').html('<div class="alert alert-danger bg-danger"> <i class="fa fa-info-circle"></i> '+data.message+'</div>');  
	            }
		    }
		});
	});

</script>