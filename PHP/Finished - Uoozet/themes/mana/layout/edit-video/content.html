<div class="content pt_shadow">
	<div class="col-md-12">
		<div class="upload-head">
			<h4><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit"><polygon points="14 2 18 6 7 17 3 17 3 13 14 2"></polygon><line x1="3" y1="22" x2="21" y2="22"></line></svg> {{LANG edit_video}}: {{TITLE}}</h4>
			<hr>
		</div>
	</div>
		<div id="video-success" class="alert alert-success"></div>
		<div class="errors alert alert-danger"></div>
		<div class="col-md-8" id="edit-form">
			<form action="" class="form-horizontal setting-panel pt_forms" method="POST">
				<input type="hidden" value="{{isChannelVid}}" name="isChannelVid">
				<?php if (PT_IsAdmin() && $pt->video->is_movie == 1) { ?>
                  <div id="movie_fields">
                     <div class="form-group">
                        <label class="col-md-12" for="movie_title">{{LANG movie_title}}</label>
                        <div class="col-md-12">
                           <input id="movie_title" name="movie_title" type="text" placeholder="{{LANG movie_title}}"  value="{{TITLE}}" class="form-control input-md">
                        </div>
                     </div>
                     <div class="form-group">
                        <label class="col-md-12" for="description">{{LANG description}}</label>
                        <div class="col-md-12">
                           <textarea name="movie_description" id="description" cols="30" rows="5" class="form-control">{{DESC}}</textarea>
                        </div>
                     </div>
					  <?php if($pt->video->is_movie != 2) {?>
                     <div class="form-group">
                        <label class="col-md-12" for="stars">{{LANG stars}}</label>
                        <div class="col-md-12">
                           <input id="stars" name="stars" type="text" placeholder="{{LANG stars}} {{LANG by_comma}}" class="form-control input-md" value="<?php echo($pt->video->stars) ?>">
                        </div>
                     </div>
                     <div class="form-group">
                        <label class="col-md-12" for="producer">{{LANG producer}}</label>
                        <div class="col-md-12">
                           <input id="producer" name="producer" type="text" placeholder="{{LANG producer}}" class="form-control input-md" value="<?php echo($pt->video->producer) ?>">
                        </div>
                     </div>
					  <?php } ?>
                     <div class="form-group">
                        <label class="col-md-12" for="release">{{LANG release}}</label>
                        <div class="col-md-12">
                           <input id="release" name="release" type="number" placeholder="{{LANG release}}" class="form-control input-md"  min="1300" max="1399" value="<?php echo($pt->video->movie_release) ?>">
                        </div>
                     </div>
					  <?php if($pt->video->is_movie != 2) {?>
                     <div class="form-group">
                        <label class="col-md-12" for="country">{{LANG country}}</label>
                        <div class="col-md-12">
                           <select class="form-control show-tick" id="country" name="country">
                              <?php foreach ($countries_name as $key => $value) { $selected = ($pt->video->country == $key) ? 'selected' : '';  ?>
                              <option value="<?php echo $key; ?>" <?php echo $selected?>><?php echo $value; ?></option>
                              <?php  } ?>
                           </select>
                        </div>
                     </div>
                     <div class="form-group">
                        <label class="col-md-12" for="quality">{{LANG quality}}</label>
                        <div class="col-md-12">
                           <select class="form-control show-tick" id="quality" name="quality">
                              <option value="CAMRip" <?php echo $pt->video->quality == 'CAMRip' ? 'selected' : ''; ?>>CAMRip</option>
                              <option value="TS" <?php echo $pt->video->quality == 'TS' ? 'selected' : ''; ?>>TS</option>
                              <option value="VHSRip" <?php echo $pt->video->quality == 'VHSRip' ? 'selected' : ''; ?>>VHSRip</option>
                              <option value="WP" <?php echo $pt->video->quality == 'WP' ? 'selected' : ''; ?>>WP</option>
                              <option value="SCR (VHSScr)" <?php echo $pt->video->quality == 'SCR (VHSScr)' ? 'selected' : ''; ?>>SCR (VHSScr)</option>
                              <option value="DVDScr" <?php echo $pt->video->quality == 'DVDScr' ? 'selected' : ''; ?>>DVDScr</option>
                              <option value="TC" <?php echo $pt->video->quality == 'TC' ? 'selected' : ''; ?>>TC</option>
                              <option value="LDRip" <?php echo $pt->video->quality == 'LDRip' ? 'selected' : ''; ?>>LDRip</option>
                              <option value="TVRip" <?php echo $pt->video->quality == 'TVRip' ? 'selected' : ''; ?>>TVRip</option>
                              <option value="SATRip" <?php echo $pt->video->quality == 'SATRip' ? 'selected' : ''; ?>>SATRip</option>
                              <option value="DVBRip" <?php echo $pt->video->quality == 'DVBRip' ? 'selected' : ''; ?>>DVBRip</option>
                              <option value="DTVRip" <?php echo $pt->video->quality == 'DTVRip' ? 'selected' : ''; ?>>DTVRip</option>
                              <option value="DVD" <?php echo $pt->video->quality == 'DVD' ? 'selected' : ''; ?>>DVD</option>
                              <option value="HDRip" <?php echo $pt->video->quality == 'HDRip' ? 'selected' : ''; ?>>HDRip</option>
                              <option value="WEB-DL" <?php echo $pt->video->quality == 'WEB-DL' ? 'selected' : ''; ?>>WEB-DL</option>
                              <option value="HD-TV" <?php echo $pt->video->quality == 'HD-TV' ? 'selected' : ''; ?>>HD-TV</option>
                              <option value="HD DVD" <?php echo $pt->video->quality == 'HD DVD' ? 'selected' : ''; ?>>HD DVD</option>
                           </select>
                        </div>
                     </div>
                     <div class="form-group">
                        <label class="col-md-12" for="category">{{LANG category}}</label>
                        <div class="col-md-12">
                           <select class="form-control show-tick" id="category" name="category">
                              <?php foreach($pt->movies_categories as $key => $category) { $selected = ($pt->video->category_id == $key) ? 'selected' : '';?>
								<option value="<?php echo $key?>" <?php echo $selected?>><?php echo $category?></option>
								<?php } ?>
                           </select>
                        </div>
                     </div>
					  <?php }else{ ?>
					  <div class="form-group">
						  <label class="col-md-12" for="category">{{LANG category}}</label>
						  <div class="col-md-12">
							  <select class="form-control show-tick" id="category1" name="category">
								  <?php foreach($pt->musicCategories as $key => $category) {?>
								  <option value="<?php echo $key?>"><?php echo $category?></option>
								  <?php } ?>
							  </select>
						  </div>
					  </div>
					  <?php } ?>
					  <div class="form-group">
						  <label class="col-md-12" for="tags">{{LANG tags}}</label>
						  <div class="col-md-12">
							  <input id="mySingleFieldTags1" name="tags" type="text" value="{{TAGS}}" placeholder="" class="form-control input-md">
							  <span class="help-block">{{LANG tags_help}}</span>
						  </div>
					  </div>
                  </div>
                  <input type="hidden" name="is_movie" class="is_movie" value="<?php echo $pt->video->is_movie ?>">

				<?php }elseif(PT_IsAdmin() && ($pt->video->is_movie == 3 || $pt->video->is_movie == 2)){ ?>
				<div id="padcast_fields">
					<div class="form-group">
						<?php if($pt->video->is_movie == 3){ ?>
						<label class="col-md-12" for="movie_title">{{LANG podcast_title}}</label>
						<?php }else{ ?>
						<label class="col-md-12" for="movie_title">{{LANG music_title}}</label>
						<?php } ?>
						<div class="col-md-12">
							<input id="movie_title" name="title" type="text" placeholder="{{LANG movie_title}}"  value="{{TITLE}}" class="form-control input-md">
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-12" for="description">{{LANG description}}</label>
						<div class="col-md-12">
							<textarea name="description" id="description" cols="30" rows="5" class="form-control">{{DESC}}</textarea>
						</div>
					</div>

					<div class="form-group">
						<label class="col-md-12" for="category">{{LANG category}}</label>
						<div class="col-md-12">
							<select class="form-control show-tick" id="category1" name="category">
								<?php foreach($pt->radioCategories as $key => $category) {?>
								<option value="<?php echo $key?>"><?php echo $category?></option>
								<?php } ?>
							</select>
						</div>
					</div>

					<div class="form-group">
						<label class="col-md-12" for="tags">{{LANG tags}}</label>
						<div class="col-md-12">
							<input id="mySingleFieldTags1" name="tags" type="text" value="{{TAGS}}" placeholder="" class="form-control input-md">
							<span class="help-block">{{LANG tags_help}}</span>
						</div>
					</div>
				</div>
				<input type="hidden" name="is_movie" class="is_movie" value="<?php echo $pt->video->is_movie ?>">
                  <?php }else{ ?>


					<div class="form-group">
						<label class="col-md-12" for="title">{{LANG video_title}}</label>
						<div class="col-md-12">
							<input id="title" name="title" type="text" value="{{TITLE}}" class="form-control input-md">
							<span class="help-block">{{LANG video_title_help}}</span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-12" for="description">{{LANG video_descritpion}}</label>
						<div class="col-md-12">
							<textarea name="description" id="description" cols="30" rows="10" class="form-control">{{DESC}}</textarea>
						</div>
					</div>
					<div class="form-group">
					<label class="col-md-12" for="category_id">{{LANG category}}<span class="required-field">*</span></label>
					<div class="col-md-12">
						<input name="category_id" id="category_id" type="text" value="{{CATEGORIES}}" placeholder="" class="form-control input-md"> <!-- only disabled for demonstration purposes -->
						<!--<ul id="singleFieldTags2">-->
						<!--<?php foreach($pt->categories as $key => $category) {?>-->
						<!--<li value="<?php echo $key?>"><?php echo $category?></li>-->
						<!--<?php } ?>-->
						<!--</ul>-->
					</div>
				</div>
<!--					<div class="form-group" <?php if (empty($pt->sub_categories_array["1"])) { ?> style="display: none;"<?php } ?> id="sub_category_div">-->
<!--						<label class="col-md-12" for="sub_category_id">{{LANG sub_category}}</label>-->
<!--						<div class="col-md-12">-->
<!--							<select name="sub_category_id" id="sub_category_id" class="form-control">-->
<!--								<?php echo $pt->sub_categories_array["'".$pt->video->category_id."'"]; ?>-->
<!--							</select>-->
<!--						</div>-->
<!--					</div>-->


					<div class="form-group">
						<label class="col-md-12" for="privacy">{{LANG privacy}}</label>
						<div class="col-md-12">
							<select name="privacy" id="privacy" class="form-control">
								<option value="0" <?php echo ($pt->video->privacy == 0) ? 'selected' : '' ?>>{{LANG public}}</option>
								<option value="1" <?php echo ($pt->video->privacy == 1) ? 'selected' : '' ?>>{{LANG private}}</option>
								<option value="2" <?php echo ($pt->video->privacy == 2) ? 'selected' : '' ?>>{{LANG unlisted}}</option>
							</select>
						</div>
					</div>
					<!--<div class="form-group">-->
		                     <!--<label class="col-md-12" for="age_restriction">{{LANG age_restriction}}</label>-->
		                     <!--<div class="col-md-12">-->
		                        <!--<select name="age_restriction" id="age_restriction" class="form-control">-->
		                           <!--<option value="1" <?php echo ($pt->video->age_restriction == 1) ? 'selected' : '' ?>>{{LANG all_ages}}</option>-->
		                           <!--<option value="2" <?php echo ($pt->video->age_restriction == 2) ? 'selected' : '' ?>>{{LANG only_18}}</option>-->
		                        <!--</select>-->
		                     <!--</div>-->
		                  <!--</div>-->
					<div class="form-group">
						<label class="col-md-12" for="tags">{{LANG tags}}</label>
						<div class="col-md-12">
							<input id="mySingleFieldTags" name="tags" type="text" value="{{TAGS}}" placeholder="" class="form-control input-md">
							<span class="help-block">{{LANG tags_help}}</span>
						</div>
					</div>
					<!--<?php if ($pt->config->sell_videos_system == 'on') { ?>-->
						<!--<div class="form-group">-->
							<!--<label class="col-md-12" for="set_p_v">{{LANG set_p_v}}</label>-->
							<!--<div class="col-md-12">-->
								<!--<input id="mySingleFieldTags" name="set_p_v" type="text" placeholder="" class="form-control input-md" value="<?php echo $pt->video->sell_video ?>">-->
								<!--<span class="help-block"><?php if($pt->config->admin_com_sell_videos > 0){ ?>{{LANG p_m_than_}} <?php echo($pt->config->admin_com_sell_videos) ?><?php }?></span>-->
							<!--</div>-->
						<!--</div>-->
						<!--<?php } ?>-->
				<?php } ?>

				<div class="form-group hidden">
					<label class="col-md-12" for="thumbnail">{{LANG thumbnail}}</label>
					<div class="col-md-12">
						<input id="thumbnail" name="thumbnail" type="file" accept="image/*">
						<span class="help-block">jpg, png, gif</span>
					</div>
				</div>
				<div class="last-sett-btn modal-footer" style="margin: 0px -25px -10px -25px;">
					<button type="button" class="btn btn-delete setting-panel-mdbtn" onclick="PT_DeleteVideo({{ID}}, 'edit-page')">{{LANG delete_videos}}</button>
					<button type="submit" id="submit-btn" class="btn btn-main setting-panel-mdbtn"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-check-circle"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg> {{LANG publish}}</button>
				</div>
				<input type="hidden" name="video-id" class="video-id" value="{{ID}}">
			</form>
		</div>
		<div class="col-md-4">
			<div class="thumbnail-preview edit-thumb">
				<img src="{{THUMBNAIL}}" alt="{{TITLE}}">
			</div>
			<div class="video-title">
				<p>{{TITLE}}</p>
			</div>
			<div class="video-description">
				<p>{{DESC_2}}</p>
			</div>
		</div>
		<div class="clear"></div>
	<div class="clear"></div>
</div>
<script>
	var sampleTags = [];
	var u_sampleTags = [];
	<?php
			$lang = new Lang();
	$users = new User();
	$channels = $users->getAllChannels();
	$categories = $lang->getAllCats();
	foreach($channels as $owner) {
				?>
		u_sampleTags['<?= $owner['id'] ?>']=[];
		<?php
	$ucategories = $lang->getAllUCatsOf($owner['id']);
	if (isset($ucategories['id'])) $ucategories = array($ucategories);
	foreach($ucategories as $ucat2){
				?>
		u_sampleTags['<?= $owner['id'] ?>'].push('<?= $ucat2['id'] ?>: <?= $ucat2[$_SESSION['lang']] ?>');
		<?php
		$sub_ucategories = $lang->getSubCats($ucat2['id']);
		if ($sub_ucategories) {
			if (isset($sub_ucategories['id'])) $sub_ucategories = array($sub_ucategories);
			foreach($sub_ucategories as $sub_ucat2){
			?>
			u_sampleTags['<?= $owner['id'] ?>'].push('<?= $sub_ucat2['id']; ?> -- <?= $sub_ucat2[$_SESSION['lang']];?>');
			<?php
			}
			}
			}
			}

	foreach($categories as $key => $category) {
				?>
		sampleTags.push('<?= $category[$_SESSION['lang']] ?>');
		<?php
	$sub_categories = $lang->getSubCats($category['id']);
	if ($sub_categories) {
		if (isset($sub_categories['id'])) $sub_categories = array($sub_categories);
		foreach($sub_categories as $sub_cat2){
		?>
		sampleTags.push('-- <?= $sub_cat2[$_SESSION['lang']];?>');
		<?php
		}
		}
		}
			?>
	// $('#category_id').tagit({
	// 	tagLimit: 1, 
	// 	availableTags: sampleTags,
	// 	singleField: false,
	// 	singleFieldNode: $('#singleFieldTags2'),
	// 	fieldName         : 'category_id',
	// 	showAutocompleteOnFocus : true,
	// 	afterTagAdded: function (event, ui) {
	// 		if ($.inArray(ui.tagLabel, sampleTags) == -1) {
	// 			$("#category_id").tagit("removeTagByLabel", ui.tagLabel);
	// 		}
	// 	},
	// 	onTagLimitExceeded  : function (event, ui){
	// 		Snackbar.show({showAction: false,backgroundColor: '#e22e40',text: '<div> {{LANG category_limit_reached}} </div>'});
	// 	},
	// });
	// $("#channel").change(function (){
		if (({{isChannelVid}} == 0) || ('{{USER username}}' === 'AlirezaShk')) {
			$('#category_id').tagit({
				tagLimit: 1000,
				availableTags: sampleTags,
				// singleField: false,
				// singleFieldNode: $('#singleFieldTags2'),
				fieldName         : 'category_id',
				showAutocompleteOnFocus : true,
				afterTagAdded: function (event, ui) {
					if ($.inArray(ui.tagLabel, sampleTags) == -1) {
						$("#category_id").tagit("removeTagByLabel", ui.tagLabel);
					}
				},
				onTagLimitExceeded  : function (event, ui){
					Snackbar.show({showAction: false,backgroundColor: '#e22e40',text: '<div>{{LANG category_limit_reached}}</div>'});
				},
			});
		} else {
			let that = this;
			$('#category_id').tagit({
				tagLimit: 1000,
				availableTags: u_sampleTags[{{ChanneluserID}}],
				// singleField: false,
				// singleFieldNode: $('#singleFieldTags2'),
				fieldName         : 'category_id',
				showAutocompleteOnFocus : true,
				afterTagAdded: function (event, ui) {
					if ($.inArray(ui.tagLabel, u_sampleTags[{{ChanneluserID}}]) == -1) {
						$("#category_id").tagit("removeTagByLabel", ui.tagLabel);
					}
					// console.log(u_sampleTags[$(that).val()]);
				},
				onTagLimitExceeded  : function (event, ui){
					Snackbar.show({showAction: false,backgroundColor: '#e22e40',text: '<div>{{LANG category_limit_reached}}</div>'});
				},
			});
		}
	// });

</script>
<script>
	$('.selectpicker').selectpicker({});
<?php
if($pt->ShowingUCATS) {
	$pt->ShowingUCATS = false;
	$js_array = json_encode($pt->sub_ucategories);
}
else
	$js_array = json_encode($pt->sub_categories);
echo "var sub_categories_array = ". $js_array . ";\n";
?>
$(document).on('change', '#category_id', function(event) {
	event.preventDefault();
	id = $(this).val();
	if (typeof(sub_categories_array["'"+id+"'"]) == 'undefined') {
   	$('#sub_category_div').hide();
    $('#sub_category_id').html('');
   }
   else{
   	$('#sub_category_div').show();
    $('#sub_category_id').html(sub_categories_array["'"+id+"'"]);
  }
});
$(function () {
	$('.edit-thumb').on('click', function(event) {
		$('#thumbnail').trigger('click');
	});
	$('#thumbnail').on('change', function(event) {
		readURL(this);
	});
	$('#description').keyup(function(event) {
      str = $(this).val().replace(/(?:\r\n|\r|\n)/g, '<br />');
      $('.video-description p').html(str);
   });
	<?php if (PT_IsAdmin() && $pt->video->is_movie) { ?>
		$('#movie_title').keyup(function(event) {
	      $('.video-title p').html($(this).val());
	   });
	<?php }else{ ?>
	   $('#title').keyup(function(event) {
	      $('.video-title p').html($(this).val());
	   });
	<?php } ?>
	$("#mySingleFieldTags").tagit({
		allowSpaces: true
	});
	$("#mySingleFieldTags1").tagit({
		allowSpaces: true
	});
	$('#edit-form form').ajaxForm({
	    url: '{{LINK aj/edit-video}}' + '?hash=' + $('.main_session').val(),
	    beforeSend: function() {
	    	$('#submit-btn').attr('disabled', true);
	    	$('#submit-btn').text("{{LANG please_wait}}");
	    },
	    success: function(data) {
	    	if (data.status == 200) {
	    		$('#video-success').html(data.message);
          // window.location.href = '{{URL}}';
	    	} else {
	    		$('#submit-btn').attr('disabled', false);
	    	    $('#submit-btn').html('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-check-circle"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg> {{LANG publish}}');
	    		$('.errors').removeClass('hidden').html(data.message);
	    	}
	    }
	});
});
<?php if (PT_IsAdmin()) { ?>
$('#assign_to_user').keyup(function(event) {
	var search_value = $(this).val();
	var search_dropdown = $('.search-dropdown_');
	if (search_value == '') {
		search_dropdown.addClass('hidden');
		search_dropdown.empty();
		return false;
	} else {
		search_dropdown.removeClass('hidden');
	}
    $.post('{{LINK aj/search_users}}', {search_value: search_value}, function(data, textStatus, xhr) {
    	if (data.status == 200) {
    		search_dropdown.html(data.html);
    	} else {
	       search_dropdown.addClass('hidden');
		   search_dropdown.empty();
		   return false;
    	}
    });
});

function add_to_input(username) {
	$('#assign_to_user').val(username);
	var search_dropdown = $('.search-dropdown_');
	search_dropdown.addClass('hidden');
    search_dropdown.empty();
}
<?php } ?>
</script>
